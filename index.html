<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Interactivo de Operaci√≥n: Reactores</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
            background-color: #FFFAF0; /* bg-amber-50 */
            color: #0c2f5a; /* text-sky-900 */
        }
        .nav-btn {
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            padding: 0.75rem 1rem;
            font-weight: 500;
            border-bottom: 4px solid transparent;
            color: #e0f2fe; /* text-sky-100 */
        }
        .nav-btn:hover {
            background-color: #075985; /* bg-sky-800 */
        }
        .nav-btn.active {
            color: #ffffff; /* text-white */
            border-bottom-color: #fdba74; /* border-amber-300 */
            background-color: #075985; /* bg-sky-800 */
        }
        .tab-btn {
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            padding: 0.5rem 1rem;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            color: #0369a1; /* text-sky-700 */
        }
        .tab-btn:hover {
            background-color: #f0f9ff; /* bg-sky-50 */
        }
        .tab-btn.active {
            color: #0c2f5a; /* text-sky-900 */
            border-bottom-color: #f97316; /* border-orange-500 */
        }
        .content-section {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 450px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 350px;
            }
        }
    </style>
</head>
<body class="bg-amber-50">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-2xl md:text-3xl font-bold text-sky-900 p-4 text-center">
                Manual Interactivo de Operaci√≥n: Reactores Epoxemex
            </h1>
        </div>
        <nav class="bg-sky-900 flex flex-wrap justify-center p-1 shadow-inner">
            <button class="nav-btn active" data-target="inicio">Inicio</button>
            <button class="nav-btn" data-target="seguridad">Protocolos de Seguridad</button>
            <button class="nav-btn" data-target="procedimientos">Procedimientos de Operaci√≥n</button>
            <button class="nav-btn" data-target="parametros">Par√°metros de Proceso</button>
            <button class="nav-btn" data-target="interfaces">Conexiones con Interfaz y Bit√°coras</button>
            <button class="nav-btn" data-target="guia">Gu√≠a R√°pida</button>
        </nav>
    </header>

    <main id="content-container" class="p-4 md:p-8 max-w-7xl mx-auto">

        <section id="inicio" class="content-section space-y-6">
            <h2 class="text-3xl font-bold text-sky-800 border-b-2 border-orange-500 pb-2">Bienvenido, Supervisor</h2>
            <p class="text-lg">
                Este manual interactivo proporciona los protocolos t√©cnicos para la operaci√≥n, control y mantenimiento del sistema de calentamiento por aceite t√©rmico y su control SCADA-PLC. El objetivo es garantizar una operaci√≥n segura y eficiente, permitiendo la gesti√≥n de la temperatura de forma local o remota.
            </p>
            <div class="p-6 bg-white rounded-lg shadow-md border-l-4 border-sky-800">
                <h3 class="text-2xl font-semibold mb-3">Descripci√≥n General del Sistema</h3>
                <p class="mb-2">
                    El sistema de control SCADA-PLC se divide en dos √°reas funcionales principales, las cuales se comunican entre s√≠ para ofrecer una visi√≥n integral del proceso:
                </p>
                <ul class="list-disc list-inside space-y-2">
                    <li>
                        <strong class="font-semibold text-sky-800">Circuito T√©rmico (CT):</strong> Gestiona todos los equipos relacionados con el aceite t√©rmico. Esto incluye sensores de temperatura en camisas y tuber√≠as, estado de v√°lvulas, operaci√≥n de agitadores y control de los tanques de servicio (aceite caliente, aceite fr√≠o y agua helada).
                    </li>
                    <li>
                        <strong class="font-semibold text-sky-800">Supervisi√≥n de la Producci√≥n (SP):</strong> Se enfoca en las variables cr√≠ticas del producto dentro del reactor, como la temperatura del producto y la presi√≥n interna.
                    </li>
                </ul>
            </div>
        </section>

        <section id="seguridad" class="content-section hidden space-y-6">
            <h2 class="text-3xl font-bold text-red-700 border-b-2 border-red-500 pb-2">Protocolos Fundamentales de Seguridad</h2>
            <p class="text-lg text-red-700 bg-red-50 p-4 rounded-lg shadow">
                La operaci√≥n segura es la m√°xima prioridad. El incumplimiento de estos protocolos puede ocasionar incendios, da√±os severos al equipo o lesiones al personal.
            </p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-xl border-t-4 border-red-500 space-y-3">
                    <h3 class="text-2xl font-bold text-red-700 mb-2">üíß Contaminaci√≥n con Agua</h3>
                    <p class="font-semibold">Es el riesgo m√°s grave.</p>
                    <p>Una m√≠nima cantidad de agua se vaporizar√° instant√°neamente a 92¬∞C, generando una expansi√≥n violenta.</p>
                    <p class="font-semibold text-sky-900">Riesgos:</p>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        <li>Expulsi√≥n violenta de aceite caliente.</li>
                        <li>Cavitaci√≥n y destrucci√≥n de rodetes de bombas.</li>
                    </ul>
                    <p class="font-semibold text-sky-900">Mitigaci√≥n Obligatoria:</p>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        <li>Ejecutar el **procedimiento de calentamiento controlado** (Secci√≥n 5.1) en cada puesta en marcha.</li>
                        <li>Utilizar el Anexo B.2 como bit√°cora de registro.</li>
                    </ul>
                </div>
                
                <div class="bg-white p-6 rounded-lg shadow-xl border-t-4 border-orange-500 space-y-3">
                    <h3 class="text-2xl font-bold text-orange-600 mb-2">üí® Degradaci√≥n del Fluido T√©rmico</h3>
                    <p>El aceite se degrada por dos mecanismos:</p>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        <li><strong>Oxidaci√≥n:</strong> Contacto con aire a alta T¬∞. Genera lodos y √°cidos.</li>
                        <li><strong>Craqueo T√©rmico (Cracking):</strong> Supera la T¬∞ m√°xima de pel√≠cula. Genera vol√°tiles (riesgo de inflamaci√≥n) y coque (puntos de sobrecalentamiento).</li>
                    </ul>
                    <p class="font-semibold text-sky-900">Mitigaci√≥n Obligatoria:</p>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        <li><strong class="text-red-700">NUNCA</strong> detener la bomba de circulaci√≥n con el quemador encendido o inmediatamente despu√©s de apagarlo.</li>
                        <li>Mantener T¬∞ del tanque de expansi√≥n < 70¬∞C.</li>
                        <li>Usar la inertizaci√≥n con nitr√≥geno.</li>
                        <li>No puentear el enclavamiento de seguridad por bajo flujo.</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-xl border-t-4 border-yellow-500 space-y-3">
                    <h3 class="text-2xl font-bold text-yellow-700 mb-2">üî• Prevenci√≥n de Incendios y EPP</h3>
                    <p class="font-semibold text-sky-900">Riesgos de Fugas:</p>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        <li>Fugas sobre aislamiento absorbente (lana mineral) pueden actuar como mecha.</li>
                        <li>Usar aislamiento **no absorbente** (vidrio celular).</li>
                        <li>Inspeccionar continuamente bridas, sellos y v√°stagos.</li>
                    </ul>
                    <p class="font-semibold text-sky-900">Equipo de Protecci√≥n Personal (EPP):</p>
                     <ul class="list-disc list-inside space-y-1 pl-2">
                        <li>Guantes para alta temperatura.</li>
                        <li>Protecci√≥n facial completa (careta).</li>
                        <li>Ropa resistente al fuego.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="procedimientos" class="content-section hidden space-y-4">
            <h2 class="text-3xl font-bold text-sky-800 border-b-2 border-orange-500 pb-2">Procedimientos de Operaci√≥n</h2>
            <p class="text-lg">
                Esta secci√≥n detalla el "c√≥mo" operar el sistema paso a paso. Utilice las pesta√±as para navegar entre los procedimientos clave.
            </p>

            <nav class="flex flex-wrap border-b-2 border-sky-200" id="procedimientos-nav">
                <button class="tab-btn active" data-target="puesta-marcha-content">1. Puesta en Marcha Inicial</button>
                <button class="tab-btn" data-target="operacion-normal-content">2. Operaci√≥n de Calentamiento</button>
                <button class="tab-btn" data-target="pid-r1-content">3. Operaci√≥n PID (Reactor 1)</button>
                <button class="tab-btn" data-target="parada-sistema-content">4. Parada del Sistema</button>
            </nav>

            <div id="procedimientos-content-container" class="p-4 bg-white rounded-lg shadow-inner">
                
                <div id="puesta-marcha-content" class="sub-content space-y-4">
                    <h3 class="text-2xl font-semibold text-red-700">Procedimiento Cr√≠tico: Puesta en Marcha Inicial y Eliminaci√≥n de Humedad</h3>
                    <p>Este procedimiento es **obligatorio** antes del primer arranque o despu√©s de una parada prolongada para eliminar de forma segura cualquier traza de agua.</p>
                    <ol class="list-decimal list-inside space-y-3">
                        <li>
                            <strong>Verificaciones Previas:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>Realizar todas las comprobaciones del <strong class="text-sky-800">Anexo B.1</strong> (Ver pesta√±a "Conexiones con Interfaz y Bit√°coras").</li>
                                <li>No continuar hasta que todos los puntos est√©n verificados.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Arranque y Venteo:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>Poner en marcha la bomba de circulaci√≥n principal.</li>
                                <li>Purgar el aire del sistema abriendo las v√°lvulas de venteo en los puntos m√°s altos hasta que solo fluya aceite.</li>
                            </ul>
                        </li>
                        <li>
                            <strong class="text-red-700">Calentamiento Controlado (Eliminaci√≥n de Humedad):</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>Usar el <strong class="text-sky-800">Anexo B.2</strong> como bit√°cora de registro.</li>
                                <li>Fijar Punto de Ajuste a **50¬∞C** y arrancar el quemador.</li>
                                <li>Aumentar temperatura en incrementos de <strong class="text-orange-600">5¬∞C cada 30 minutos</strong>.</li>
                                <li>Al acercarse a **92¬∞C**, proceder con **EXTREMA CAUTELA**.</li>
                                <li>Prestar m√°xima atenci√≥n a ruidos, vibraciones o fluctuaciones de presi√≥n.</li>
                                <li><strong class="text-red-700">NO AUMENTAR LA TEMPERATURA</strong> si aparecen estos s√≠ntomas, hasta que cesen por completo.</li>
                                <li>Mantener T¬∞ entre **105¬∞C y 110¬∞C** durante al menos **2 a 4 horas** para secado.</li>
                                <li>Solo despu√©s de confirmar ausencia total de agua, elevar T¬∞ a nivel de producci√≥n.</li>
                            </ul>
                        </li>
                    </ol>
                </div>

                <div id="operacion-normal-content" class="sub-content hidden space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Operaci√≥n de Calentamiento de un Reactor</h3>
                    <ol class="list-decimal list-inside space-y-3">
                        <li>
                            <strong>Preparaci√≥n y Selecci√≥n de Modo:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>Revisar que el bot√≥n de paro de emergencia no est√© presionado.</li>
                                <li>Consultar los par√°metros de proceso en la pesta√±a <strong class="text-sky-800">"Par√°metros de Proceso"</strong>.</li>
                                <li>En el gabinete del reactor, colocar los selectores en **Local** o **Remoto** e informar al cuarto de control.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Operaci√≥n en Modo Local (desde Gabinete):</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li><strong class="text-orange-600">V√°lvulas ON/OFF:</strong> Usar botones pulsadores (Verde: Abrir, Rojo: Cerrar). Confirmar con l√°mparas indicadoras.</li>
                                <li><strong class="text-orange-600">V√°lvulas Proporcionales:</strong> Girar el potenci√≥metro al % deseado. Verificar en la pantalla de n√∫meros rojos.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Operaci√≥n en Modo Remoto (desde Cuarto de Control):</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>Asegurarse que los selectores en el gabinete est√©n en **"Remoto"**.</li>
                                <li>Acceder a la interfaz web de Unitronics (CT): <strong class="text-sky-800 font-mono">10.41.131.204</strong>.</li>
                                <li>Seleccionar el reactor e introducir los valores (Punto de Ajuste, %, frecuencia) seg√∫n el Anexo A.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Visualizaci√≥n del Proceso:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li><strong class="text-orange-600">Localmente:</strong> Usar la pantalla t√°ctil del gabinete (Conexi√≥n con Interfaz ICLincks <strong class="text-sky-800 font-mono">10.41.131.203</strong>).</li>
                                <li><strong class="text-orange-600">Remotamente:</strong> Acceder a la misma IP (<strong class="text-sky-800 font-mono">10.41.131.203</strong>) en un navegador para ver gr√°ficos hist√≥ricos y tendencias.</li>
                            </ul>
                        </li>
                    </ol>
                </div>
                
                <div id="pid-r1-content" class="sub-content hidden space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Operaci√≥n del Controlador PID (Solo Reactor 1)</h3>
                    <p>El Reactor 1 cuenta con un controlador autom√°tico IBS BatchControl CTR210i para un control preciso de la temperatura del producto.</p>
                    <ol class="list-decimal list-inside space-y-3">
                        <li>
                            <strong>Configuraci√≥n Previa:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>En el gabinete, colocar selector de v√°lvula proporcional de aceite caliente en **"Remoto"**.</li>
                                <li>En el selector secundario, elegir **"IBS"** para ceder el control.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Modos de Operaci√≥n del IBS:</strong>
                            <ul class="list-disc list-inside pl-6 space-y-1 mt-1">
                                <li>
                                    <strong class="text-orange-600">Modo Manual:</strong> El supervisor ajusta el **% de apertura de la v√°lvula** usando las flechas del teclado del IBS.
                                </li>
                                <li>
                                    <strong class="text-orange-600">Modo Autom√°tico:</strong> El supervisor establece la **temperatura deseada del producto (Punto de Ajuste)**. El PID ajusta la v√°lvula autom√°ticamente.
                                </li>
                                <li>Consulte el <strong class="text-sky-800">Anexo A</strong> para el Punto de Ajuste correcto (ej. 220¬∞C para EPO-815L).</li>
                            </ul>
                        </li>
                    </ol>
                </div>

                <div id="parada-sistema-content" class="sub-content hidden space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Parada del Sistema</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-sky-50 p-4 rounded-lg border border-sky-200">
                            <h4 class="text-xl font-semibold text-sky-800 mb-2">Parada Normal Programada</h4>
                            <ol class="list-decimal list-inside space-y-2">
                                <li>Apagar el quemador del calentador.</li>
                                <li><strong class="text-orange-600">Mantener la bomba de circulaci√≥n funcionando</strong> hasta que la T¬∞ del aceite baje de 92¬∞C. (Esto disipa el calor residual y previene el craqueo t√©rmico).</li>
                                <li>Detener la bomba de circulaci√≥n.</li>
                            </ol>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <h4 class="text-xl font-semibold text-red-700 mb-2">Parada de Emergencia</h4>
                            <ol class="list-decimal list-inside space-y-2">
                                <li>Activar el **bot√≥n de paro de emergencia** (local o remoto).</li>
                                <li>Esta acci√≥n corta inmediatamente el combustible al quemador.</li>
                                <li>La bomba de circulaci√≥n <strong class="text-orange-600">debe continuar funcionando</strong> (si es seguro) para disipar el calor residual.</li>
                                <li>No reiniciar el sistema hasta que la causa haya sido resuelta por personal autorizado.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="parametros" class="content-section hidden space-y-6">
            <h2 class="text-3xl font-bold text-sky-800 border-b-2 border-orange-500 pb-2">Par√°metros de Proceso (Anexo A)</h2>
            <p class="text-lg">
                Seleccione un reactor para ver sus productos, par√°metros de operaci√≥n y tiempos de proceso.
            </p>
            
            <div class="mb-6">
                <label for="reactor-selector" class="block text-lg font-medium text-sky-800 mb-2">Seleccionar Reactor:</label>
                <select id="reactor-selector" class="w-full max-w-md p-3 border border-sky-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-sky-500 text-lg">
                    <option value="">-- Elija un reactor --</option>
                    <option value="R-1">Reactor 1</option>
                    <option value="R-2">Reactor 2</option>
                    <option value="R-4">Reactor 4</option>
                    <option value="R-6">Reactor 6</option>
                    <option value="R-7">Reactor 7</option>
                    <option value="R-9">Reactor 9</option>
                </select>
            </div>
            
            <div class="bg-white p-4 rounded-lg shadow-lg">
                <h3 class="text-2xl font-semibold text-center text-sky-800 mb-4">Tiempos de Proceso por Producto</h3>
                <div class="chart-container">
                    <canvas id="procesoChart"></canvas>
                </div>
            </div>

            <div class="mt-6">
                <h3 class="text-2xl font-semibold text-sky-800 mb-4">Fichas de Datos del Reactor</h3>
                <div id="reactor-data-display" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="text-center p-6 bg-gray-50 rounded-lg shadow-inner col-span-full">
                        <p class="text-xl text-gray-500">Seleccione un reactor para ver sus datos.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="interfaces" class="content-section hidden space-y-4">
            <h2 class="text-3xl font-bold text-sky-800 border-b-2 border-orange-500 pb-2">Conexiones con Interfaz del Sistema y Bit√°coras</h2>
            <p class="text-lg">
                Secci√≥n de referencia para consultar los componentes de hardware, las direcciones IP del sistema SCADA y las bit√°coras de procedimientos cr√≠ticos.
            </p>
            
            <nav class="flex flex-wrap border-b-2 border-sky-200" id="interfaces-nav">
                <button class="tab-btn active" data-target="scada-ips-content">Conexi√≥n con Interfaz Web (SCADA)</button>
                <button class="tab-btn" data-target="gabinete-local-content">Gabinete de Reactor</button>
                <button class="tab-btn" data-target="gabinete-tanques-content">Gabinetes de Tanques</button>
                <button class="tab-btn" data-target="bitacoras-content">Bit√°coras (Anexo B)</button>
            </nav>

            <div id="interfaces-content-container" class="p-4 bg-white rounded-lg shadow-inner space-y-6">

                <div id="scada-ips-content" class="sub-content space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Direcciones IP de la Conexi√≥n con Interfaz Web (SCADA)</h3>
                    <p>El acceso remoto se realiza a trav√©s de un navegador web. Cada IP tiene un prop√≥sito espec√≠fico:</p>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-sky-100">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-sky-800 uppercase tracking-wider">Equipo</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-sky-800 uppercase tracking-wider">Sistema</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-sky-800 uppercase tracking-wider">Direcci√≥n IP</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-sky-800 uppercase tracking-wider">Prop√≥sito Principal</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="bg-yellow-50">
                                    <td class="px-6 py-4 whitespace-nowrap font-medium">Unitronics</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Circuito T√©rmico</td>
                                    <td class="px-6 py-4 whitespace-nowrap font-mono font-bold">10.41.131.204</td>
                                    <td class="px-6 py-4 font-bold text-orange-600">**OPERACI√ìN Y CONTROL REMOTO** (Sala de Mando)</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap font-medium">ICLincks</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Circuito T√©rmico</td>
                                    <td class="px-6 py-4 whitespace-nowrap font-mono font-bold">10.41.131.203</td>
                                    <td class="px-6 py-4">**VISUALIZACI√ìN Y GR√ÅFICOS** (Pantallas T√°ctiles)</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap font-medium">Unitronics</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Supervisi√≥n Producci√≥n</td>
                                    <td class="px-6 py-4 whitespace-nowrap font-mono">10.41.131.201</td>
                                    <td class="px-6 py-4">Muestra T¬∞ y Presi√≥n del producto.</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap font-medium">ICLincks</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Supervisi√≥n Producci√≥n</td>
                                    <td class="px-6 py-4 whitespace-nowrap font-mono">10.41.131.206</td>
                                    <td class="px-6 py-4">(Sistema en desarrollo)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="gabinete-local-content" class="sub-content hidden space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Componentes del Gabinete de Control del Reactor</h3>
                    <p>Permite la operaci√≥n local. Sus componentes clave son:</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong class="text-orange-600">Selectores de Modo:</strong> (Local / Fuera de Servicio / Remoto) para transferir el control.</li>
                        <li><strong class="text-orange-600">Controles V√°lvulas ON/OFF:</strong> Botones (Verde/Rojo) y L√°mparas indicadoras.</li>
                        <li><strong class="text-orange-600">Controles V√°lvulas Proporcionales:</strong> Potenci√≥metro para ajustar % de apertura y pantalla digital de valor real.</li>
                        <li><strong class="text-orange-600">Pantalla T√°ctil:</strong> Consulta la conexi√≥n con interfaz web de ICLincks (Gr√°ficos) en la IP <span class="font-mono">10.41.131.203</span>.</li>
                        <li><strong class="text-orange-600">Pantalla de Temperatura:</strong> Muestra T¬∞ del producto (alterna 2 reactores c/ 5 seg).</li>
                        <li><strong class="text-orange-600">Bot√≥n de Paro de Emergencia:</strong> Corta suministro el√©ctrico a v√°lvulas y detiene agitador (en modo remoto).</li>
                    </ul>
                </div>
                
                <div id="gabinete-tanques-content" class="sub-content hidden space-y-4">
                    <h3 class="text-2xl font-semibold text-sky-800">Componentes de los Gabinetes de Tanques</h3>
                    <p>Gestionan los tanques de servicio (aceite caliente, aceite fr√≠o, agua helada).</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><strong class="text-orange-600">Protecci√≥n de Nivel Bajo:</strong> Evita que las bombas operen en vac√≠o.</li>
                        <li><strong class="text-orange-600">Protecci√≥n de Nivel Alto:</strong> Evita el sobrellenado.</li>
                        <li><strong class="text-orange-600">Control de Bombas y V√°lvulas:</strong> Operaci√≥n Local/Remota de bombas y v√°lvula de nitr√≥geno (tanque aceite caliente).</li>
                        <li><strong class="text-orange-600">Alarmas:</strong> Sonora y visual para niveles anormales.</li>
                    </ul>
                </div>
                
                <div id="bitacoras-content" class="sub-content hidden space-y-6">
                    <h3 class="text-2xl font-semibold text-sky-800">Anexo B: Bit√°coras de Puesta en Marcha (Referencia)</h3>
                    <p>Estas son representaciones de las bit√°coras f√≠sicas que deben completarse durante los procedimientos cr√≠ticos.</p>
                    
                    <div class="bg-sky-50 p-4 rounded-lg border border-sky-200">
                        <h4 class="text-xl font-semibold text-sky-800 mb-3">B.1 Bit√°cora de Verificaciones Previas al Arranque</h4>
                        <ul class="list-none space-y-2">
                            <li class="font-semibold">Niveles y V√°lvulas</li>
                            <li class="pl-4">‚ñ° 1. Nivel de aceite en tanque de expansi√≥n (aprox. 1/3 en fr√≠o).</li>
                            <li class="pl-4">‚ñ° 2. Posici√≥n de v√°lvulas manuales del circuito principal (abiertas).</li>
                            <li class="pl-4">‚ñ° 3. Posici√≥n de v√°lvulas de aislamiento de reactores (cerradas).</li>
                            <li class="pl-4">‚ñ° 4. Suministro de nitr√≥geno para inertizaci√≥n (disponible).</li>
                            
                            <li class="font-semibold mt-2">Equipos y Seguridad</li>
                            <li class="pl-4">‚ñ° 5. Enclavamientos de seguridad (probados / verificados).</li>
                            <li class="pl-4">‚ñ° 6. Botones de Paro de Emergencia (liberados).</li>
                            <li class="pl-4">‚ñ° 7. Suministro el√©ctrico a bombas y quemador (activo).</li>

                            <li class="font-semibold mt-2">Arranque de Circulaci√≥n</li>
                            <li class="pl-4">‚ñ° 8. Bomba de circulaci√≥n principal (arrancada, giro correcto).</li>
                            <li class="pl-4">‚ñ° 9. Venteo de aire en puntos altos (completado, fluya solo aceite).</li>
                        </ul>
                    </div>
                    
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <h4 class="text-xl font-semibold text-red-700 mb-3">B.2 Bit√°cora de Calentamiento Controlado (Eliminaci√≥n de Humedad)</h4>
                        <table class="min-w-full divide-y divide-gray-300">
                            <thead class="bg-red-100">
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-red-800 uppercase">Punto de Ajuste</th>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-red-800 uppercase">Hora</th>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-red-800 uppercase">Temp. Real</th>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-red-800 uppercase">Observaciones</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                <tr><td class="px-3 py-1">50¬∞C</td><td></td><td></td><td></td></tr>
                                <tr><td class="px-3 py-1">55¬∞C</td><td></td><td></td><td></td></tr>
                                <tr><td class="px-3 py-1">... (incrementos de 5¬∞C c/30 min)</td><td></td><td></td><td></td></tr>
                                <tr class="font-bold bg-yellow-100"><td class="px-3 py-1">90¬∞C</td><td></td><td></td><td>M√ÅXIMA PRECAUCI√ìN</td></tr>
                                <tr class="font-bold bg-yellow-100"><td class="px-3 py-1">95¬∞C</td><td></td><td></td><td>(No subir si hay ruidos)</td></tr>
                                <tr class="font-bold bg-yellow-100"><td class="px-3 py-1">100¬∞C</td><td></td><td></td><td>(No subir si hay ruidos)</td></tr>
                                <tr class="font-bold bg-green-100"><td class="px-3 py-1">105-110¬∞C</td><td></td><td></td><td>Inicia permanencia (m√≠n. 2-4 hrs)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="guia" class="content-section hidden space-y-4">
            <h2 class="text-3xl font-bold text-sky-800 border-b-2 border-orange-500 pb-2">Gu√≠a R√°pida de Operaci√≥n</h2>
            <p class="text-lg">
                Para supervisores experimentados. Siga estos pasos para una operaci√≥n est√°ndar:
            </p>
            <div class="p-6 bg-white rounded-lg shadow-md">
                <ol class="list-decimal list-inside space-y-3 text-lg">
                    <li>
                        <strong class="font-semibold">Verificar Paro de Emergencia:</strong> Asegurarse de que no est√© activado.
                    </li>
                    <li>
                        <strong class="font-semibold">Consultar Par√°metros:</strong> Revisar la pesta√±a <strong class="text-sky-800">"Par√°metros de Proceso"</strong> para T¬∞, tiempos y Puntos de Ajuste.
                    </li>
                    <li>
                        <strong class="font-semibold">Preparar Pantalla T√°ctil:</strong> Iniciar sesi√≥n en el gabinete (<span class="font-mono text-sky-800">10.41.131.203</span>) y seleccionar el reactor.
                    </li>
                    <li>
                        <strong class="font-semibold">Seleccionar Modo:</strong> Usar selectores del gabinete (Local/Remoto) e informar al cuarto de control.
                    </li>
                    <li>
                        <strong class="font-semibold">Operar:</strong>
                        <ul class="list-disc list-inside pl-6 text-base mt-1">
                            <li><strong class="text-orange-600">Local:</strong> Usar botones y potenci√≥metros.</li>
                            <li><strong class="text-orange-600">Remoto:</strong> Cuarto de control opera desde <span class="font-mono text-sky-800">10.41.131.204</span>.</li>
                        </ul>
                    </li>
                    <li>
                        <strong class="font-semibold">Supervisar:</strong> Vigilar constantemente las variables y compararlas con los par√°metros objetivo.
                    </li>
                </ol>
                <p class="mt-6 text-center font-bold text-red-700 bg-red-50 p-4 rounded-md">
                    ¬°NUNCA opere manually las v√°lvulas desde sus manerales sin autorizaci√≥n de mantenimiento!
                </p>
            </div>
        </section>

    </main>

    <footer class="text-center p-4 mt-8 text-sm text-sky-700 border-t border-sky-200">
        Manual Interactivo v2.1 | Fecha: 14 de octubre de 2025
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- Base de Datos de Par√°metros (del Anexo A) ---
            const database = {
                'R-1': {
                    products: [
                        { id: "EPO-1 (33248)", etapa: "Enfriamiento", tiempo: 10, nitrogeno: "Burbujeo (arriba y abajo)", notas: "N‚ÇÇ al inicio y fin del proceso." },
                        { id: "EPO-35", etapa: "Enfriamiento", tiempo: 0, nitrogeno: "Al agregar Nonil", notas: "No requiere enfriamiento." },
                        { id: "EPO-50", etapa: "Enfriamiento", tiempo: 7, nitrogeno: "Burbujeo (arriba y abajo)", notas: "N‚ÇÇ al agregar Nonil." }
                    ]
                },
                'R-2': {
                    products: [
                        { id: "YD-114C (33010)", etapa: "Calentamiento", temp: "21¬∞C a 80¬∞C", tiempo: 2, setPoint: "120¬∞C" },
                        { id: "EPO-50G (33464)", etapa: "Enfriamiento", tiempo: 2, nitrogeno: "Burbujeo (arriba y abajo)", notas: "N‚ÇÇ desde inicio a fin." }
                    ]
                },
                'R-4': {
                    products: [
                        { id: "LM-555 (33036)", etapa: "Calentamiento", temp: "23¬∞C a 65¬∞C", tiempo: 1.5, setPoint: "120¬∞C", notas: "Instructivo no indica N‚ÇÇ." }
                    ]
                },
                'R-6': {
                     products: [
                        { id: "80-300", etapa: "N/A", tiempo: 0, nitrogeno: "Burbujeo (arriba y abajo)", notas: "Envasado directo, no enfr√≠a." }
                    ]
                },
                'R-7': {
                    products: [
                        { id: "EPO-815L (33851)", etapa: "Calentamiento", temp: "24¬∞C a 185¬∞C", tiempo: 14, setPoint: "120¬∞C a 220¬∞C" },
                        { id: "EPO-815L (33851)", etapa: "Enfriamiento", temp: "187¬∞C a 120¬∞C", tiempo: 4, nitrogeno: "Burbujeo (abajo)" },
                        { id: "EPO-815L (33851)", etapa: "Vac√≠o", tiempo: 2.5, presion: "10 mmHg", notas: "Tiempo total: 19.5 hrs." }
                    ]
                },
                'R-9': {
                    products: [
                        { id: "EPO-1 (33248)", etapa: "Enfriamiento", tiempo: 12.5, nitrogeno: "Burbujeo (arriba y abajo)", notas: "Similar a R-1." },
                        { id: "EPO-35", etapa: "Enfriamiento", tiempo: 0, nitrogeno: "Al agregar Nonil", notas: "No requiere enfriamiento." },
                        { id: "EPO-50 (33348)", etapa: "Enfriamiento", tiempo: 7, nitrogeno: "Burbujeo (arriba y abajo)", notas: "N‚ÇÇ desde inicio a fin." }
                    ]
                }
            };

            // --- L√≥gica de Navegaci√≥n Principal ---
            const navButtons = document.querySelectorAll('.nav-btn');
            const contentSections = document.querySelectorAll('.content-section');

            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetId = btn.getAttribute('data-target');
                    
                    navButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                });
            });

            // --- L√≥gica de Sub-Navegaci√≥n (Pesta√±as) ---
            function setupTabs(navSelector, contentContainerId) {
                const tabButtons = document.querySelectorAll(navSelector);
                const contentContainer = document.getElementById(contentContainerId);

                if (!contentContainer) {
                    console.error(`Contenedor de contenido con ID ${contentContainerId} no encontrado.`);
                    return;
                }

                const tabContents = contentContainer.children;

                tabButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const targetId = btn.getAttribute('data-target');
                        
                        tabButtons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');

                        Array.from(tabContents).forEach(content => {
                            if (content.id === targetId) {
                                content.classList.remove('hidden');
                            } else {
                                content.classList.add('hidden');
                            }
                        });
                    });
                });
            }

            setupTabs('#procedimientos-nav .tab-btn', 'procedimientos-content-container');
            setupTabs('#interfaces-nav .tab-btn', 'interfaces-content-container');

            // --- L√≥gica de Gr√°fico Interactivo y Par√°metros ---
            const reactorSelector = document.getElementById('reactor-selector');
            const dataDisplay = document.getElementById('reactor-data-display');
            
            const chartConfig = {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Tiempo de Proceso (horas)',
                        data: [],
                        backgroundColor: [
                            'rgba(2, 132, 199, 0.6)', /* bg-sky-600 */
                            'rgba(249, 115, 22, 0.6)', /* bg-orange-500 */
                            'rgba(23, 165, 137, 0.6)', /* bg-teal-500 */
                            'rgba(107, 114, 128, 0.6)', /* bg-gray-500 */
                            'rgba(2, 132, 199, 0.8)',
                            'rgba(249, 115, 22, 0.8)',
                        ],
                        borderColor: [
                            'rgba(2, 132, 199, 1)',
                            'rgba(249, 115, 22, 1)',
                            'rgba(23, 165, 137, 1)',
                            'rgba(107, 114, 128, 1)',
                            'rgba(2, 132, 199, 1)',
                            'rgba(249, 115, 22, 1)',
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Tiempo (horas)',
                                font: { size: 14 }
                            }
                        },
                        x: {
                             ticks: {
                                autoSkip: false,
                                maxRotation: 0,
                                minRotation: 0,
                                callback: function(value) {
                                    const label = this.getLabelForValue(value);
                                    if (label && label.length > 20) {
                                        return label.split(' - ')[0]; // Acortar etiqueta si es larga
                                    }
                                    return label;
                                }
                             }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw} horas`;
                                }
                            }
                        }
                    }
                }
            };
            
            let myChart = null;
            
            function updateReactorData(reactorId) {
                
                // --- Inicializaci√≥n del gr√°fico (solo una vez) ---
                if (!myChart) {
                    const ctx = document.getElementById('procesoChart').getContext('2d');
                    if (ctx) { // Se comprueba que el contexto se obtuvo correctamente
                        myChart = new Chart(ctx, chartConfig);
                    } else {
                        console.error("Error al inicializar el gr√°fico: canvas 'procesoChart' no encontrado.");
                        return; // Salir si el canvas no est√° listo
                    }
                }

                const data = database[reactorId];
                dataDisplay.innerHTML = '';
                
                const chartLabels = [];
                const chartData = [];

                if (!data || data.products.length === 0) {
                    dataDisplay.innerHTML = `<div class="text-center p-6 bg-gray-50 rounded-lg shadow-inner col-span-full"><p class="text-xl text-gray-500">No hay datos de proceso para este reactor.</p></div>`;
                    myChart.data.labels = [];
                    myChart.data.datasets[0].data = [];
                    myChart.update();
                    return;
                }
                
                data.products.forEach(prod => {
                    let cardHTML = `
                        <div class="bg-white p-5 rounded-lg shadow-md border-l-4 border-orange-500 space-y-2">
                            <h4 class="text-xl font-bold text-sky-800">${prod.id}</h4>
                            <p><strong class="font-semibold text-orange-600">Etapa:</strong> ${prod.etapa}</p>
                            <p><strong class="font-semibold">Tiempo:</strong> ${prod.tiempo} horas</p>
                    `;
                    if (prod.temp) cardHTML += `<p><strong class="font-semibold">Rango Temp.:</strong> ${prod.temp}</p>`;
                    if (prod.setPoint) cardHTML += `<p><strong class="font-semibold">Set Point Aceite:</strong> ${prod.setPoint}</p>`;
                    if (prod.nitrogeno) cardHTML += `<p><strong class="font-semibold">Uso de N‚ÇÇ:</strong> ${prod.nitrogeno}</p>`;
                    if (prod.presion) cardHTML += `<p><strong class="font-semibold">Presi√≥n:</strong> ${prod.presion}</p>`;
                    if (prod.notas) cardHTML += `<p class="text-sm text-gray-600 pt-2 border-t mt-2"><strong>Notas:</strong> ${prod.notas}</p>`;
                    
                    cardHTML += `</div>`;
                    dataDisplay.innerHTML += cardHTML;

                    chartLabels.push(`${prod.id} - ${prod.etapa}`);
                    chartData.push(prod.tiempo);
                });

                myChart.data.labels = chartLabels;
                myChart.data.datasets[0].data = chartData;
                myChart.update();
            }

            reactorSelector.addEventListener('change', (e) => {
                updateReactorData(e.target.value);
            });

            // Inicializar con el valor seleccionado al inicio (que es vac√≠o)
            updateReactorData(reactorSelector.value); 

        });
    </script>
</body>
</html>